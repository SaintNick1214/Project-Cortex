---
id: overview
title: API Reference Overview
sidebar_position: 1
description: Complete guide to navigating and using the Cortex API - a persistent memory system for AI agents built on Convex
---

# API Reference Overview

Welcome to the Cortex API Reference! This guide explains how to navigate the documentation and use Cortex effectively.

## What is Cortex?

Cortex is a **persistent memory system for AI agents** built on Convex. It provides:

<FeatureGrid>
  <FeatureCard
    icon="layers"
    title="Four-Layer Architecture"
    description="ACID stores + Vector index + Facts store + Convenience API"
    size="medium"
  />
  <FeatureCard
    icon="shield"
    title="Memory Space Isolation"
    description="Flexible boundaries (per user, team, or project)"
    size="medium"
  />
  <FeatureCard
    icon="users"
    title="Multi-Tenancy"
    description="Built-in tenantId for SaaS platform isolation"
    size="medium"
  />
</FeatureGrid>

<FeatureGrid>
  <FeatureCard
    icon="bot"
    title="Hive Mode"
    description="Multiple tools share one memory space (zero duplication)"
    size="large"
  />
  <FeatureCard
    icon="brain"
    title="Infinite Context"
    description="Never run out of context via retrieval"
    size="large"
  />
  <FeatureCard
    icon="history"
    title="Automatic Versioning"
    description="Track how information changes over time"
    size="large"
  />
  <FeatureCard
    icon="semantic"
    title="Belief Revision System"
    description="Intelligent fact management with conflict resolution"
    size="large"
  />
</FeatureGrid>

<FeatureGrid>
  <FeatureCard
    icon="lock"
    title="GDPR Compliance"
    description="Built-in cascade deletion (Cloud Mode)"
    size="medium"
  />
  <FeatureCard
    icon="search"
    title="Universal Filters"
    description="Same filters work across all operations"
    size="medium"
  />
  <FeatureCard
    icon="package"
    title="Embedding-Agnostic"
    description="Bring your own embeddings or use Cloud Mode"
    size="medium"
  />
</FeatureGrid>

---

## Documentation Structure

The API Reference is organized by architectural layers:

### Core Memory System (Start Here)

- **[Memory Operations](/api-reference/memory-operations)** - The main API you'll use
  - Layer 4 convenience (`cortex.memory.*`)
  - Full orchestration: `remember()`, `rememberStream()`, `recall()`
  - Search, get, update, delete operations
  - Orchestration Observer for real-time monitoring
- **[Memory Space Operations](/api-reference/memory-space-operations)** - Memory space management
  - Fundamental isolation boundary in Cortex
  - Explicit registration for production deployments
  - Hive Mode participant tracking
  - `register()`, `get()`, `list()`, `archive()`, `delete()`, `getStats()`
- **[Conversation Operations](/api-reference/conversation-operations)** - Layer 1a (ACID)
  - Immutable conversation threads (memorySpace-scoped)
  - Source of truth for all messages
  - `create()`, `get()`, `addMessage()`, `getHistory()`, `list()`, `search()`, `delete()`

### User & Coordination

- **[User Operations](/api-reference/user-operations)** - User profiles + GDPR
  - Shared user data across all memory spaces
  - GDPR cascade deletion by userId (SDK + Cloud Mode)
  - Version history and time-travel queries
  - `get()`, `update()`, `delete()`, `search()`, `list()`, `export()`
- **[Sessions Operations](/api-reference/sessions-operations)** - Session lifecycle management
  - Multi-session support (web, mobile, API)
  - Activity tracking and idle detection
  - Configurable timeouts via Governance API
  - `create()`, `get()`, `getOrCreate()`, `touch()`, `end()`, `getActive()`, `expireIdle()`
- **[Auth Integration](/integrations/auth-providers)** - Authentication context
  - Framework-agnostic auth integration
  - Multi-tenancy support (tenantId auto-injection)
  - Works with Auth0, Clerk, NextAuth, Firebase, custom JWT
- **[Agent Management](/api-reference/agent-management)** - Optional agent metadata registry (analytics, discovery)
  - Optional metadata registration for discovery/analytics
  - Cascade deletion by participantId across all spaces
  - Use `cortex.memorySpaces.*` for production isolation
- **[Context Operations](/api-reference/context-operations)** - Workflow coordination
  - Hierarchical task tracking (parent/child chains)
  - Multi-agent collaboration
  - Cross-memorySpace delegation
  - `create()`, `get()`, `update()`, `delete()`, `getChain()`, `getChildren()`
- **[A2A Communication](/api-reference/a2a-communication)** - Inter-agent messaging
  - Helper API built on memory system (`source.type='a2a'`)
  - Bidirectional storage (sender + receiver)
  - `send()`, `request()` (requires pub/sub), `broadcast()`, `getConversation()`

### Advanced Storage

- **[Immutable Store](/api-reference/immutable-store-api)** - Layer 1b
  - TRULY shared (no memorySpace scoping), versioned, immutable data
  - KB articles, policies, audit logs
  - `store()`, `get()`, `getVersion()`, `getHistory()`, `purge()`
- **[Mutable Store](/api-reference/mutable-store-api)** - Layer 1c
  - TRULY shared (no memorySpace scoping), mutable, current-value data
  - ACID transactions, atomic operations
  - `set()`, `get()`, `update()`, `increment()`, `transaction()`, `delete()`
- **[Facts Operations](/api-reference/facts-operations)** - Layer 3 Facts Store
  - Structured knowledge with versioning and confidence
  - Belief Revision System (v0.24.0+): `revise()`, `checkConflicts()`, `supersede()`
  - Enriched extraction (v0.15.0+): `searchAliases`, `semanticContext`, `entities`, `relations`
  - `store()`, `get()`, `update()`, `delete()`, `search()`, `queryBySubject()`, `history()`

### Platform & Governance

- **[Governance Policies](/api-reference/governance-policies-api)** - Retention rules & compliance
  - Per-layer, per-type, importance-based retention rules
  - Compliance templates: GDPR, HIPAA, SOC2, FINRA
  - Session lifecycle policies
  - `setPolicy()`, `getPolicy()`, `enforce()`, `simulate()`
- **[Graph Operations](/api-reference/graph-operations)** - Graph database integration (v0.7.0+)
  - Optional integration with Neo4j, Memgraph
  - Real-time sync via GraphSyncWorker
  - Multi-hop traversal and orphan cleanup
  - `syncToGraph` option across all APIs

### Reference

- **[Types & Interfaces](/reference/types-interfaces)** - TypeScript definitions
- **[Error Handling](/reference/error-handling)** - Error codes and debugging

---

## Navigation Guide

### By Use Case

**I want to...**

**Store conversation messages:**
→ [Memory Operations](/api-reference/memory-operations#remember) - `cortex.memory.remember()`

**Search agent memories:**
→ [Memory Operations](/api-reference/memory-operations#search) - `cortex.memory.search()`

**Manage user profiles:**
→ [User Operations](/api-reference/user-operations) - `cortex.users.*`

**Delete user data (GDPR):**
→ [User Operations](/api-reference/user-operations#delete) - `cortex.users.delete({ cascade: true })`

**Track multi-agent workflows:**
→ [Context Operations](/api-reference/context-operations) - `cortex.contexts.*`

**Send agent-to-agent messages:**
→ [A2A Communication](/api-reference/a2a-communication) - `cortex.a2a.send()`

**Store shared knowledge:**
→ [Immutable Store](/api-reference/immutable-store-api) - `cortex.immutable.store()`

**Store live data (inventory, config):**
→ [Mutable Store](/api-reference/mutable-store-api) - `cortex.mutable.set()`

**Set retention policies:**
→ [Governance Policies](/api-reference/governance-policies-api) - `cortex.governance.*`

**Manage user sessions:**
→ [Sessions Operations](/api-reference/sessions-operations) - `cortex.sessions.*`

**Store and query facts:**
→ [Facts Operations](/api-reference/facts-operations) - `cortex.facts.*`

**Integrate graph database:**
→ [Graph Operations](/api-reference/graph-operations) - GraphAdapter and GraphSyncWorker

**See all TypeScript types:**
→ [Types & Interfaces](/reference/types-interfaces)

**Debug an error:**
→ [Error Handling](/reference/error-handling)

### By Layer

**Layer 1a (ACID Conversations):**
→ [Conversation Operations](/api-reference/conversation-operations)

**Layer 1b (Immutable Store):**
→ [Immutable Store](/api-reference/immutable-store-api)

**Layer 1c (Mutable Store):**
→ [Mutable Store](/api-reference/mutable-store-api)

**Layer 2 (Vector Index):**
→ [Memory Operations](/api-reference/memory-operations) - `cortex.vector.*`

**Layer 3 (Facts Store):**
→ [Facts Operations](/api-reference/facts-operations) - `cortex.facts.*`

**Layer 4 (Convenience API):**
→ [Memory Operations](/api-reference/memory-operations) - `cortex.memory.*`

**Sessions:**
→ [Sessions Operations](/api-reference/sessions-operations) - `cortex.sessions.*`

---

## Key Concepts

### The Four-Layer Architecture

Cortex separates **storage** (immutable source) from **search** (optimized index):

<FlowDiagram 
  title="Four-Layer Architecture" 
  caption="Each layer serves a specific purpose"
>
  <FlowNode
    title="Layer 1: ACID Stores"
    icon="database"
    variant="primary"
  >
    1a: Conversations � 1b: Immutable (KB) � 1c: Mutable (config)
  </FlowNode>
  <FlowNode
    title="Layer 2: Vector Index"
    icon="search"
    variant="warning"
  >
    Semantic search � References Layer 1 via conversationRef
  </FlowNode>
  <FlowNode
    title="Layer 3: Facts Store"
    icon="brain"
    variant="success"
  >
    LLM-extracted facts � Belief Revision � 60-90% token savings
  </FlowNode>
  <FlowNode
    title="Layer 4: Convenience API"
    icon="layers"
    variant="default"
  >
    cortex.memory.* � Primary developer interface
  </FlowNode>
</FlowDiagram>

<Callout type="tip">
**Most developers use Layer 4** (`cortex.memory.*`) - it handles Layers 1, 2, and 3 automatically.
</Callout>

**Benefits of layered architecture:**

- Retention on Vector doesn't lose ACID source
- Facts provide 60-90% token savings for infinite context
- Can always retrieve full context from conversation source
- Fast search + complete audit trail

### References Over Duplication

Data is linked, not duplicated:

```typescript
// Vector memory references ACID conversation
{
  id: 'mem-123',
  content: 'User password is Blue',
  conversationRef: {
    conversationId: 'conv-456',
    messageIds: ['msg-001'],  // ← Link to source
  }
}

// Can always get full context
const conversation = await cortex.conversations.get('conv-456');
const originalMessage = conversation.messages.find(m => m.id === 'msg-001');
```

### Universal Filters

**Key Design Principle:** The same filters work across ALL operations.

```typescript
// Define filters once
const filters = {
  userId: "user-123",
  tags: ["preferences"],
  minImportance: 50,
  createdAfter: new Date("2025-10-01"),
};

// Use everywhere
await cortex.memory.search(memorySpaceId, query, filters);
await cortex.memory.count(memorySpaceId, filters);
await cortex.memory.list(memorySpaceId, filters);
await cortex.memory.updateMany(memorySpaceId, filters, updates);
await cortex.memory.deleteMany(memorySpaceId, filters);
await cortex.memory.export(memorySpaceId, filters);
```

**Supported Filters:** `userId`, `tags`, `importance`, `createdBefore/After`, `accessCount`, `version`, `source.type`, and any `metadata.*` field.

### Importance Scale (0-100)

Granular importance for filtering and retention:

| Range | Level | Examples |
|-------|-------|----------|
| 90-100 | Critical | Passwords, security credentials |
| 70-89 | High | User preferences, decisions |
| 40-69 | Medium | Conversation context (default: 50) |
| 10-39 | Low | Casual observations |
| 0-9 | Trivial | Debug logs |

### Automatic Versioning

Updates don't overwrite - they create new versions:

```typescript
// v1
await cortex.memory.store('user-123-personal', { content: 'Password is Blue', ... });

// v2 (v1 preserved in history)
await cortex.memory.update('user-123-personal', memoryId, { content: 'Password is Red' });

// Access history
const memory = await cortex.memory.get('user-123-personal', memoryId);
console.log(memory.version); // 2
console.log(memory.previousVersions[0].content); // "Password is Blue"
```

**Retention:** Default 10 versions (configurable per agent)

### GDPR Cascade Deletion

<Callout type="tip">
**Available in SDK**: Full cascade deletion is implemented in the open-source SDK. Cloud Mode adds legal guarantees, certificates, and managed graph integration.
</Callout>

One call deletes from ALL stores with `userId`:

```typescript
// SDK (Free) & Cloud Mode: One call deletes from ALL stores with userId
await cortex.users.delete("user-123", { cascade: true });

// Automatically deletes from:
// ✅ User profile (immutable store, type='user')
// ✅ Layer 1a (conversations.*) - All conversations with userId
// ✅ Layer 1b (immutable.*) - All records with userId
// ✅ Layer 1c (mutable.*) - All keys with userId
// ✅ Layer 2 (vector.*) - All memories with userId (across ALL memory spaces)
// ✅ Layer 3 (facts.*) - All facts referencing userId
// ✅ Graph (if adapter configured) - All nodes with userId property
```

**See**: [User Operations API](/api-reference/user-operations) for complete GDPR cascade documentation.

### Belief Revision System (v0.24.0+)

<Callout type="tip">
**New in v0.24.0**: Intelligent fact management that prevents duplicates and maintains knowledge consistency.
</Callout>

When facts are extracted from conversations, the Belief Revision System automatically:

1. **Detects conflicts** using slot matching (fast) and semantic matching (accurate)
2. **Resolves conflicts** using LLM-based decision making
3. **Takes appropriate action**: CREATE, UPDATE, SUPERSEDE, or skip
4. **Logs all changes** for audit trails

<FlowDiagram 
  title="Belief Revision Flow" 
  caption="How conflicts are detected and resolved"
>
  <FlowNode
    title="New Fact"
    icon="file"
    variant="primary"
  >
    Incoming fact to process
  </FlowNode>
  <FlowNode
    title="Slot Match?"
    icon="search"
    variant="warning"
  >
    Fast matching by subject/predicate
  </FlowNode>
  <FlowNode
    title="Semantic Match?"
    icon="brain"
    variant="warning"
  >
    Accurate matching by meaning
  </FlowNode>
  <FlowNode
    title="LLM Decision"
    icon="bot"
    variant="success"
  >
    UPDATE � SUPERSEDE � NONE
  </FlowNode>
</FlowDiagram>

**See**: [Facts Operations API - Belief Revision](/api-reference/facts-operations#belief-revision-system-v0240)

---

## API Conventions

### Naming Patterns

- **Operations**: Verb-based (`create`, `get`, `update`, `delete`, `search`)
- **Namespaces**: Plural (`conversations`, `users`, `contexts`, `agents`)
- **Options**: `*Options` suffix (`SearchOptions`, `DeleteOptions`)
- **Results**: `*Result` suffix (`RememberResult`, `DeleteResult`)
- **Filters**: `*Filters` suffix (`UniversalFilters`, `UserFilters`)

### Return Values

- **Single item**: `Entity | null`
- **Multiple items**: `Entity[]`
- **With pagination**: `{ items: Entity[], total: number, hasMore: boolean }`
- **Operations**: `*Result` interface with details

### Async/Await

All Cortex operations are async:

```typescript
// ✅ Always use await
const memory = await cortex.memory.get("agent-1", memoryId);

// ❌ Don't forget await
const memory = cortex.memory.get("agent-1", memoryId); // Returns Promise!
```

### Error Handling

All errors are catchable with type information:

```typescript
try {
  await cortex.memory.store("agent-1", data);
} catch (error) {
  if (error instanceof CortexError) {
    console.log(`Error: ${error.code}`);
    // Type-safe error handling
  }
}
```

---

## Direct Mode vs Cloud Mode

### Direct Mode (Free, Open Source)

**What you get:**

<FeatureGrid>
  <FeatureCard
    icon="database"
    title="Full Storage APIs"
    description="All layers available"
    size="medium"
  />
  <FeatureCard
    icon="brain"
    title="All Memory Operations"
    description="Complete memory management"
    size="medium"
  />
  <FeatureCard
    icon="search"
    title="Universal Filters"
    description="Same filters work everywhere"
    size="medium"
  />
</FeatureGrid>

<FeatureGrid>
  <FeatureCard
    icon="history"
    title="Automatic Versioning"
    description="Track all changes"
    size="large"
  />
  <FeatureCard
    icon="settings"
    title="Complete Flexibility"
    description="Full control over your setup"
    size="large"
  />
</FeatureGrid>

**What you provide:**

- Your Convex instance
- Your embeddings (OpenAI, Cohere, local)
- Agent execution infrastructure
- Pub/sub for A2A (optional)

### Cloud Mode (Managed, Premium)

**Additional features:**

<FeatureGrid>
  <FeatureCard
    icon="lock"
    title="GDPR Cascade"
    description="One-click deletion across all stores"
    size="medium"
  />
  <FeatureCard
    icon="brain"
    title="Auto-Embeddings"
    description="No API keys needed"
    size="medium"
  />
  <FeatureCard
    icon="message"
    title="Managed Pub/Sub"
    description="Real-time A2A without infrastructure"
    size="medium"
  />
</FeatureGrid>

<FeatureGrid>
  <FeatureCard
    icon="bot"
    title="Smart Store AI"
    description="Automatic update detection"
    size="medium"
  />
  <FeatureCard
    icon="analytics"
    title="Analytics Dashboard"
    description="Usage insights"
    size="medium"
  />
  <FeatureCard
    icon="shield"
    title="Governance Policies"
    description="Automatic retention rules"
    size="medium"
  />
</FeatureGrid>

---

## Getting Help

### Documentation

- **[Memory Operations](/api-reference/memory-operations)** - Most comprehensive guide
- **[Facts Operations](/api-reference/facts-operations)** - Structured knowledge and Belief Revision
- **[Sessions Operations](/api-reference/sessions-operations)** - Session lifecycle management
- **[Types & Interfaces](/reference/types-interfaces)** - TypeScript reference
- **[Error Handling](/reference/error-handling)** - Debugging guide

### Practical Guides

- **[Patterns & Practices](/reference/patterns-and-practices)** - Common implementation patterns
- **[Cheat Sheet](/reference/cheat-sheet)** - Quick reference for all operations

### Community

- **GitHub Discussions** - Ask questions, share patterns

### Found a Bug?

1. Check [Error Handling](/reference/error-handling) for known issues
2. Search GitHub Issues for existing reports
3. Open new issue with minimal reproduction

---

## Next Steps

**New to Cortex?**
→ Start with [Memory Operations](/api-reference/memory-operations) - the main API

**Building multi-agent systems?**
→ Read [Context Operations](/api-reference/context-operations) and [A2A Communication](/api-reference/a2a-communication)

**Need GDPR compliance?**
→ Check [User Operations](/api-reference/user-operations#delete) for cascade deletion

**Working with facts and knowledge?**
→ Explore [Facts Operations](/api-reference/facts-operations) and the Belief Revision System

**Want code examples?**
→ See [Patterns & Practices](/reference/patterns-and-practices) and [Cheat Sheet](/reference/cheat-sheet)

---

<QuickNav>
  <QuickNavItem
    title="Memory Operations"
    description="Primary API for storing and searching memories"
    href="/api-reference/memory-operations"
  />
  <QuickNavItem
    title="Patterns & Practices"
    description="Common implementation patterns"
    href="/reference/patterns-and-practices"
  />
  <QuickNavItem
    title="Cheat Sheet"
    description="Quick reference for all operations"
    href="/reference/cheat-sheet"
  />
  <QuickNavItem
    title="Facts Operations"
    description="Structured knowledge with Belief Revision"
    href="/api-reference/facts-operations"
  />
</QuickNav>

---

**Questions?** Ask in [GitHub Discussions](https://github.com/SaintNick1214/Project-Cortex/discussions).
