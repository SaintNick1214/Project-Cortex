# Memory Space Operations API

> **Last Updated**: 2026-01-01

This document covers the `cortex.memorySpaces.*` namespace for managing memory spaces, participants, and access control.

## Overview

**Memory spaces** are the fundamental isolation boundary in Cortex. The `cortex.memorySpaces.*` API provides explicit management and registration capabilities beyond the implicit creation that happens automatically when you first use a memorySpaceId.

**When to use this API:**

- ✅ Production deployments (explicit registration)
- ✅ Analytics and observability needs
- ✅ Hive Mode with participant tracking
- ✅ Memory space lifecycle management
- ✅ Access control and permissions
- ✅ Multi-tenant SaaS (automatic `tenantId` isolation via AuthContext)

**When you don't need it:**

- ⚠️ Quick prototypes (use implicit creation)
- ⚠️ Simple single-agent apps
- ⚠️ When you just want memory to "just work"

---

## Table of Contents

- [register()](#register) - Register a memory space with metadata
- [get()](#get) - Retrieve memory space details
- [list()](#list) - List all memory spaces with pagination
- [count()](#count) - Count memory spaces
- [search()](#search) - Search memory spaces by metadata
- [update()](#update) - Update memory space metadata
- [addParticipant()](#addparticipant) - Add a single participant
- [removeParticipant()](#removeparticipant) - Remove a single participant
- [updateParticipants()](#updateparticipants) - Add/remove multiple participants (Hive Mode)
- [findByParticipant()](#findbyparticipant) - Find spaces by participant
- [archive()](#archive) - Mark memory space as inactive
- [reactivate()](#reactivate) - Reactivate archived space
- [delete()](#delete) - Delete memory space and all data
- [getStats()](#getstats) - Get analytics for a memory space

---

## register()

Register a memory space with metadata and participant tracking.

### Signature

```typescript
cortex.memorySpaces.register(
  params: RegisterMemorySpaceParams,
  options?: { syncToGraph?: boolean }
): Promise<MemorySpace>
```

### Parameters

```typescript
interface RegisterMemorySpaceParams {
  memorySpaceId: string; // Memory space ID (e.g., "user-123-personal")
  tenantId?: string; // Multi-tenancy isolation (auto-injected from AuthContext)
  name?: string; // Human-readable name
  type: "personal" | "team" | "project" | "custom"; // Organization type
  participants?: Array<{
    // For Hive Mode tracking
    id: string; // Participant identifier
    type: string; // "user", "agent", "tool", etc.
  }>;
  metadata?: Record<string, unknown>; // Custom metadata
}
```

### Returns

```typescript
interface MemorySpace {
  _id: string;
  memorySpaceId: string;
  name?: string;
  type: "personal" | "team" | "project" | "custom";
  tenantId?: string; // Auto-injected from AuthContext for multi-tenancy
  participants: Array<{
    id: string;
    type: string;
    joinedAt: number;
  }>;
  metadata: Record<string, unknown>;
  status: "active" | "archived";
  createdAt: number;
  updatedAt: number;
}
```

### Examples

**Personal AI Memory:**

```typescript
// Register user's personal memory space
await cortex.memorySpaces.register({
  memorySpaceId: "user-123-personal",
  name: "Alice's Personal AI Memory",
  type: "personal",
  participants: [
    { id: "cursor", type: "ai-tool" },
    { id: "claude", type: "ai-tool" },
    { id: "notion-ai", type: "ai-tool" },
  ],
  metadata: {
    owner: "user-123",
    environment: "production",
  },
});
```

**Team Workspace:**

```typescript
// Register team workspace
await cortex.memorySpaces.register({
  memorySpaceId: "team-engineering-workspace",
  name: "Engineering Team Workspace",
  type: "team",
  participants: [
    { id: "code-review-bot", type: "agent" },
    { id: "deployment-bot", type: "agent" },
    { id: "ticket-bot", type: "agent" },
  ],
  metadata: {
    team: "engineering",
    project: "apollo",
  },
});
```

**With Graph Sync:**

```typescript
// Register and sync to graph database
await cortex.memorySpaces.register(
  {
    memorySpaceId: "finance-agent-space",
    name: "Finance Agent Memory",
    type: "custom",
    participants: [{ id: "finance-agent", type: "agent" }],
  },
  { syncToGraph: true },
);
```

### Error Handling

```typescript
try {
  await cortex.memorySpaces.register({
    memorySpaceId: "space-123",
    type: "personal",
  });
} catch (error) {
  if (error.code === "MEMORYSPACE_ALREADY_EXISTS") {
    console.log("Space already registered");
    // Use update() instead
  }
}
```

---

## get()

Retrieve memory space details and metadata.

### Signature

```typescript
cortex.memorySpaces.get(memorySpaceId: string): Promise<MemorySpace | null>
```

### Examples

**Basic Get:**

```typescript
const space = await cortex.memorySpaces.get("user-123-personal");

if (space) {
  console.log(space.name); // "Alice's Personal AI Memory"
  console.log(space.participants); // [{ id: 'cursor', type: 'ai-tool', joinedAt: 1234567890 }, ...]
  console.log(space.type); // 'personal'
}
```

**Check if Exists:**

```typescript
const space = await cortex.memorySpaces.get("unknown-space");

if (space === null) {
  console.log("Memory space does not exist");
  // Create it
  await cortex.memorySpaces.register({
    memorySpaceId: "unknown-space",
    type: "personal",
  });
}
```

---

## list()

List memory spaces with filtering, pagination, and sorting.

### Signature

```typescript
cortex.memorySpaces.list(filters?: ListMemorySpacesFilter): Promise<ListMemorySpacesResult>
```

### Parameters

```typescript
interface ListMemorySpacesFilter {
  type?: "personal" | "team" | "project" | "custom";
  status?: "active" | "archived";
  tenantId?: string; // Multi-tenancy filter (auto-injected from AuthContext)
  participant?: string; // Filter by participant ID
  limit?: number; // Default: 100
  offset?: number; // Default: 0
  sortBy?: "createdAt" | "updatedAt" | "name";
  sortOrder?: "asc" | "desc"; // Default: "desc"
}
```

### Returns

```typescript
interface ListMemorySpacesResult {
  spaces: MemorySpace[];
  total: number;
  hasMore: boolean;
  offset: number;
}
```

### Examples

**List All Spaces:**

```typescript
const result = await cortex.memorySpaces.list();

console.log(`Found ${result.total} memory spaces`);
result.spaces.forEach((space) => {
  console.log(`${space.name} (${space.type})`);
});
```

**Filter by Type:**

```typescript
// Get all personal spaces
const personal = await cortex.memorySpaces.list({
  type: "personal",
  status: "active",
});

// Get all team workspaces
const teams = await cortex.memorySpaces.list({
  type: "team",
});
```

**Filter by Participant (Hive Mode):**

```typescript
// Find all spaces where Cursor participates
const cursorSpaces = await cortex.memorySpaces.list({
  participant: "cursor",
});

console.log(`Cursor operates in ${cursorSpaces.total} memory spaces`);
```

**Pagination:**

```typescript
// Get first 20
const page1 = await cortex.memorySpaces.list({ limit: 20, offset: 0 });

// Get next 20
if (page1.hasMore) {
  const page2 = await cortex.memorySpaces.list({ limit: 20, offset: 20 });
}
```

**Sorting:**

```typescript
// Sort by name ascending
const sorted = await cortex.memorySpaces.list({
  sortBy: "name",
  sortOrder: "asc",
});

// Most recently updated first
const recent = await cortex.memorySpaces.list({
  sortBy: "updatedAt",
  sortOrder: "desc",
});
```

---

## count()

Count memory spaces matching filter criteria.

### Signature

```typescript
cortex.memorySpaces.count(filter?: {
  type?: "personal" | "team" | "project" | "custom";
  status?: "active" | "archived";
}): Promise<number>
```

### Examples

```typescript
// Count all spaces
const total = await cortex.memorySpaces.count();

// Count active personal spaces
const activePersonal = await cortex.memorySpaces.count({
  type: "personal",
  status: "active",
});

console.log(`${activePersonal} active personal spaces out of ${total} total`);
```

---

## search()

Search memory spaces by name or metadata.

### Signature

```typescript
cortex.memorySpaces.search(query: string, options?: SearchOptions): Promise<MemorySpace[]>
```

### Parameters

```typescript
interface SearchOptions {
  type?: "personal" | "team" | "project" | "custom";
  status?: "active" | "archived";
  limit?: number;
}
```

### Examples

**Search by Name:**

```typescript
const results = await cortex.memorySpaces.search("engineering");

// Returns spaces with "engineering" in name or metadata
// [
//   { memorySpaceId: 'team-engineering-workspace', name: 'Engineering Team', ... },
//   { memorySpaceId: 'project-engineering-docs', name: 'Engineering Docs Project', ... }
// ]
```

**Search with Filters:**

```typescript
const results = await cortex.memorySpaces.search("alice", {
  type: "personal",
  status: "active",
  limit: 5,
});
```

---

## update()

Update memory space metadata (not participants - use updateParticipants()).

### Signature

```typescript
cortex.memorySpaces.update(
  memorySpaceId: string,
  updates: MemorySpaceUpdates,
  options?: { syncToGraph?: boolean }
): Promise<MemorySpace>
```

### Parameters

```typescript
interface MemorySpaceUpdates {
  name?: string;
  metadata?: Record<string, unknown>; // Merged with existing
  status?: "active" | "archived";
}
```

### Examples

**Update Name:**

```typescript
await cortex.memorySpaces.update("user-123-personal", {
  name: "Alice's Updated Personal Space",
});
```

**Update Metadata:**

```typescript
await cortex.memorySpaces.update("team-engineering-workspace", {
  metadata: {
    lastReview: Date.now(),
    status: "active-development",
  },
});
```

**With Graph Sync:**

```typescript
await cortex.memorySpaces.update(
  "team-engineering-workspace",
  { name: "Updated Team Space" },
  { syncToGraph: true },
);
```

---

## addParticipant()

Add a single participant to a memory space.

### Signature

```typescript
cortex.memorySpaces.addParticipant(
  memorySpaceId: string,
  participant: { id: string; type: string; joinedAt: number }
): Promise<MemorySpace>
```

### Examples

```typescript
// User installs new AI tool
await cortex.memorySpaces.addParticipant("user-123-personal", {
  id: "github-copilot",
  type: "ai-tool",
  joinedAt: Date.now(),
});
```

---

## removeParticipant()

Remove a single participant from a memory space.

### Signature

```typescript
cortex.memorySpaces.removeParticipant(
  memorySpaceId: string,
  participantId: string
): Promise<MemorySpace>
```

### Examples

```typescript
// User uninstalls tool
await cortex.memorySpaces.removeParticipant("user-123-personal", "old-tool");

// Note: Participant's existing memories remain (audit trail)
// But space no longer lists it as active participant
```

---

## updateParticipants()

Add or remove multiple participants from a memory space (Hive Mode).

### Signature

```typescript
cortex.memorySpaces.updateParticipants(
  memorySpaceId: string,
  updates: ParticipantUpdates
): Promise<MemorySpace>
```

### Parameters

```typescript
interface ParticipantUpdates {
  add?: Array<{ id: string; type: string; joinedAt: number }>; // Add participants
  remove?: string[]; // Remove participant IDs
}
```

### Examples

**Add Participants:**

```typescript
// User installs new AI tools
await cortex.memorySpaces.updateParticipants("user-123-personal", {
  add: [
    { id: "github-copilot", type: "ai-tool", joinedAt: Date.now() },
    { id: "windsurf", type: "ai-tool", joinedAt: Date.now() },
  ],
});
```

**Remove Participants:**

```typescript
// User uninstalls tools
await cortex.memorySpaces.updateParticipants("user-123-personal", {
  remove: ["old-tool-1", "old-tool-2"],
});
```

**Replace Participants:**

```typescript
// Set exact participant list
await cortex.memorySpaces.updateParticipants("team-workspace", {
  remove: ["bot-1", "bot-2"], // Remove old
  add: [
    { id: "bot-3", type: "agent", joinedAt: Date.now() },
    { id: "bot-4", type: "agent", joinedAt: Date.now() },
  ],
});
```

---

## findByParticipant()

Find all memory spaces where a participant is active.

### Signature

```typescript
cortex.memorySpaces.findByParticipant(participantId: string): Promise<MemorySpace[]>
```

### Examples

```typescript
// Find all spaces where a specific user participates
const userSpaces = await cortex.memorySpaces.findByParticipant("user-123");

console.log(`User is active in ${userSpaces.length} memory spaces`);
userSpaces.forEach((space) => {
  console.log(`- ${space.name} (${space.type})`);
});
```

---

## archive()

Mark memory space as archived (inactive). Data is preserved but space is hidden from default lists.

### Signature

```typescript
cortex.memorySpaces.archive(memorySpaceId: string, options?: ArchiveOptions): Promise<MemorySpace>
```

### Parameters

```typescript
interface ArchiveOptions {
  reason?: string; // Why archived
  metadata?: Record<string, unknown>; // Archive metadata
}
```

### Examples

**Archive Project:**

```typescript
// Project complete, archive its memory space
await cortex.memorySpaces.archive("project-apollo", {
  reason: "Project completed successfully",
  metadata: {
    archivedBy: "admin-456",
    completedAt: Date.now(),
  },
});

// Space still exists, data intact, but marked inactive
const space = await cortex.memorySpaces.get("project-apollo");
console.log(space.status); // 'archived'
```

**Archive Inactive User:**

```typescript
// User hasn't logged in for 90 days
await cortex.memorySpaces.archive(`user-${userId}-personal`, {
  reason: "User inactive for 90 days",
  metadata: {
    lastSeen: user.lastSeen,
  },
});
```

---

## reactivate()

Reactivate an archived memory space.

### Signature

```typescript
cortex.memorySpaces.reactivate(memorySpaceId: string): Promise<MemorySpace>
```

### Examples

```typescript
// User returns, reactivate their space
await cortex.memorySpaces.reactivate(`user-${userId}-personal`);

const space = await cortex.memorySpaces.get(`user-${userId}-personal`);
console.log(space.status); // 'active'
```

---

## delete()

**⚠️ DESTRUCTIVE:** Delete memory space and ALL associated data.

### Signature

```typescript
cortex.memorySpaces.delete(
  memorySpaceId: string,
  options: DeleteMemorySpaceOptions
): Promise<DeleteMemorySpaceResult>
```

### Parameters

```typescript
interface DeleteMemorySpaceOptions {
  cascade: boolean; // REQUIRED: Must be true to proceed
  reason: string; // REQUIRED: Why deleting (audit trail)
  confirmId?: string; // Optional: Safety check (must match memorySpaceId)
  syncToGraph?: boolean; // Delete from graph database
}
```

### Returns

```typescript
interface DeleteMemorySpaceResult {
  memorySpaceId: string;
  deleted: true;
  cascade: {
    conversationsDeleted: number; // Layer 1a
    memoriesDeleted: number; // Layer 2
    factsDeleted: number; // Layer 3
    totalBytes: number; // Storage freed
  };
  reason: string;
  deletedAt: number;
}
```

### Examples

**GDPR Deletion:**

```typescript
// User requests data deletion
const result = await cortex.memorySpaces.delete("user-123-personal", {
  cascade: true,
  reason: "GDPR deletion request from user-123",
  confirmId: "user-123-personal", // Safety check
});

console.log(`Deleted ${result.cascade.memoriesDeleted} memories`);
console.log(`Deleted ${result.cascade.conversationsDeleted} conversations`);
console.log(`Deleted ${result.cascade.factsDeleted} facts`);
```

**Project Cleanup:**

```typescript
// Project archived, delete after retention period
await cortex.memorySpaces.delete("project-old-2023", {
  cascade: true,
  reason: "Data retention policy: 2 years expired",
});
```

**Safety Checks:**

```typescript
// Without cascade - ERROR
try {
  await cortex.memorySpaces.delete("user-123-personal", {
    cascade: false, // Must be true
    reason: "Test",
  });
} catch (error) {
  console.error("Must set cascade: true to delete");
}

// With confirmId (extra safety)
await cortex.memorySpaces.delete("production-space", {
  cascade: true,
  reason: "Migration to new architecture",
  confirmId: "production-space", // Must match memorySpaceId
});
```

---

## getStats()

Get analytics and usage statistics for a memory space.

### Signature

```typescript
cortex.memorySpaces.getStats(
  memorySpaceId: string,
  options?: GetMemorySpaceStatsOptions
): Promise<MemorySpaceStats>
```

### Parameters

```typescript
interface GetMemorySpaceStatsOptions {
  timeWindow?: "24h" | "7d" | "30d" | "90d" | "all"; // Default: "all"
  includeParticipants?: boolean; // Participant activity (Hive Mode)
}
```

### Returns

```typescript
interface MemorySpaceStats {
  memorySpaceId: string;

  // Counts
  totalMemories: number;
  totalConversations: number;
  totalFacts: number;
  totalMessages: number;

  // Activity (based on timeWindow)
  memoriesThisWindow?: number;
  conversationsThisWindow?: number;

  // Storage
  storage: {
    conversationsBytes: number;
    memoriesBytes: number;
    factsBytes: number;
    totalBytes: number;
  };

  // Performance
  avgSearchTime?: string; // Average search latency (e.g., "12ms")

  // Content Analysis
  topTags: string[];
  importanceBreakdown: {
    critical: number; // 90-100
    high: number; // 70-89
    medium: number; // 40-69
    low: number; // 10-39
    trivial: number; // 0-9
  };

  // Participant Activity (if includeParticipants: true)
  participants?: Array<{
    participantId: string;
    memoriesStored: number;
    conversationsStored: number;
    factsExtracted: number;
    firstActive: number;
    lastActive: number;
    avgImportance: number;
    topTags: string[];
  }>;
}
```

### Examples

**Basic Stats:**

```typescript
const stats = await cortex.memorySpaces.getStats("user-123-personal");

console.log(`Total memories: ${stats.totalMemories}`);
console.log(
  `Storage used: ${(stats.storage.totalBytes / 1024 / 1024).toFixed(2)} MB`,
);
console.log(`Top tags: ${stats.topTags.join(", ")}`);
```

**With Time Window:**

```typescript
// Last 7 days
const weekStats = await cortex.memorySpaces.getStats("user-123-personal", {
  timeWindow: "7d",
});

console.log(`Activity this week: ${weekStats.memoriesThisWindow} memories`);
console.log(`Conversations this week: ${weekStats.conversationsThisWindow}`);
```

**With Participant Breakdown (Hive Mode):**

```typescript
const stats = await cortex.memorySpaces.getStats("team-engineering-workspace", {
  timeWindow: "7d",
  includeParticipants: true,
});

console.log(`Activity this week: ${stats.memoriesThisWindow} memories`);

// Participant breakdown
stats.participants?.forEach((p) => {
  console.log(`${p.participantId}:`);
  console.log(`  - Stored: ${p.memoriesStored} memories`);
  console.log(`  - Last active: ${new Date(p.lastActive).toISOString()}`);
  console.log(`  - Avg importance: ${p.avgImportance}`);
});
```

---

## Common Patterns

### Pattern 1: Dynamic Space Creation (SaaS)

```typescript
// Create memory space per customer on signup
async function onUserSignup(userId: string) {
  const memorySpaceId = `customer-${userId}-space`;

  await cortex.memorySpaces.register({
    memorySpaceId,
    name: `Customer ${userId} Memory`,
    type: "personal",
    metadata: {
      customerId: userId,
      tier: "free",
      signupDate: Date.now(),
    },
  });

  return memorySpaceId;
}
```

### Pattern 2: Team Workspace Management

```typescript
// Admin creates team workspace
async function createTeamWorkspace(
  teamId: string,
  teamName: string,
  members: string[],
) {
  const memorySpaceId = `team-${teamId}-workspace`;

  await cortex.memorySpaces.register({
    memorySpaceId,
    name: `${teamName} Workspace`,
    type: "team",
    participants: members.map((m) => ({
      id: `bot-${m}`,
      type: "agent",
    })),
    metadata: {
      teamId,
      createdBy: "admin",
      members,
    },
  });

  return memorySpaceId;
}

// Add new member
async function addTeamMember(teamId: string, memberId: string) {
  await cortex.memorySpaces.addParticipant(`team-${teamId}-workspace`, {
    id: `bot-${memberId}`,
    type: "agent",
    joinedAt: Date.now(),
  });
}
```

### Pattern 3: Lifecycle Management

```typescript
// Complete lifecycle
async function memorySpaceLifecycle(projectId: string) {
  const memorySpaceId = `project-${projectId}`;

  // 1. Create
  await cortex.memorySpaces.register({
    memorySpaceId,
    type: "project",
    metadata: { status: "active" },
  });

  // 2. Use (implicit in app)
  // await cortex.memory.remember({ memorySpaceId, ... });

  // 3. Complete project - archive
  await cortex.memorySpaces.archive(memorySpaceId, {
    reason: "Project completed",
  });

  // 4. After retention period - delete
  await cortex.memorySpaces.delete(memorySpaceId, {
    cascade: true,
    reason: "Retention period (2 years) expired",
  });
}
```

### Pattern 4: Analytics Dashboard

```typescript
// Build memory space analytics dashboard
async function getMemorySpaceDashboard() {
  const result = await cortex.memorySpaces.list({ status: "active" });

  const dashboard = await Promise.all(
    result.spaces.map(async (space) => {
      const stats = await cortex.memorySpaces.getStats(space.memorySpaceId, {
        timeWindow: "7d",
        includeParticipants: true,
      });

      return {
        name: space.name,
        type: space.type,
        participants: space.participants.length,
        memoriesThisWeek: stats.memoriesThisWindow,
        storage: stats.storage.totalBytes,
        topParticipant: stats.participants?.[0]?.participantId,
      };
    }),
  );

  return dashboard;
}

// Usage
const dashboard = await getMemorySpaceDashboard();
console.table(dashboard);
```

---

## Best Practices

### 1. Use Structured IDs

```typescript
// ✅ GOOD: Structured, searchable
"user-{userId}-personal";
"team-{teamId}-workspace";
"project-{projectId}-memory";

// ❌ BAD: Random, opaque
"abc123";
"temp";
"space1";
```

### 2. Always Register in Production

```typescript
// Development: Implicit is fine
await cortex.memory.remember({ memorySpaceId: "test-space", ... });

// Production: Explicit registration
await cortex.memorySpaces.register({
  memorySpaceId: "user-123-personal",
  name: "Alice's Personal Space",
  type: "personal",
  metadata: { environment: "production" },
});
```

### 3. Track Participants in Hive Mode

```typescript
// ✅ GOOD: Clear participant list with types
await cortex.memorySpaces.register({
  memorySpaceId: "user-123-personal",
  participants: [
    { id: "cursor", type: "ai-tool" },
    { id: "claude", type: "ai-tool" },
    { id: "notion-ai", type: "ai-tool" },
  ],
});
```

### 4. Use Metadata for Organization

```typescript
// Rich metadata for filtering and search
await cortex.memorySpaces.register({
  memorySpaceId: "user-123-personal",
  metadata: {
    owner: "user-123",
    environment: "production",
    tier: "pro",
    region: "us-west-2",
    created: Date.now(),
    tags: ["active", "premium"],
  },
});
```

### 5. Archive Before Delete

```typescript
// ✅ GOOD: Archive first, delete later
await cortex.memorySpaces.archive(memorySpaceId, { reason: "Inactive" });

// Wait for retention period...

// Then delete
await cortex.memorySpaces.delete(memorySpaceId, {
  cascade: true,
  reason: "Retention period expired",
});

// ❌ BAD: Direct deletion without archival period
```

---

## Error Handling

### Common Errors

**MEMORYSPACE_ALREADY_EXISTS:**

```typescript
try {
  await cortex.memorySpaces.register({ memorySpaceId: "user-123-personal", type: "personal" });
} catch (error) {
  if (error.message?.includes("MEMORYSPACE_ALREADY_EXISTS")) {
    // Use update() instead
    await cortex.memorySpaces.update("user-123-personal", { ... });
  }
}
```

**MEMORYSPACE_NOT_FOUND:**

```typescript
const space = await cortex.memorySpaces.get("nonexistent-space");

if (space === null) {
  // Create it
  await cortex.memorySpaces.register({
    memorySpaceId: "nonexistent-space",
    type: "personal",
  });
}
```

**CASCADE_REQUIRED (Delete Prevention):**

```typescript
try {
  await cortex.memorySpaces.delete("active-space", {
    cascade: false,
    reason: "Test",
  });
} catch (error) {
  if (error.message?.includes("CASCADE_REQUIRED")) {
    console.error("Must set cascade: true to delete space with data");
  }
}
```

**CONFIRM_ID_MISMATCH:**

```typescript
try {
  await cortex.memorySpaces.delete("space-123", {
    cascade: true,
    reason: "Test",
    confirmId: "wrong-id", // Doesn't match
  });
} catch (error) {
  if (error.message?.includes("CONFIRM_ID_MISMATCH")) {
    console.error("confirmId must match memorySpaceId");
  }
}
```

---

## Conclusion

The Memory Space Operations API provides explicit control over memory space lifecycle, participant management, and analytics.

**Key Takeaways:**

- ✅ Registration is optional (implicit creation works)
- ✅ Register in production for analytics and tracking
- ✅ Use participants for Hive Mode tracking
- ✅ Archive before delete (safer)
- ✅ Monitor with getStats() for observability

**Most important:** memorySpaceId is the fundamental isolation boundary. Everything else builds on this.

---

**Related Documentation:**

- [Memory Operations API](./memory-operations) - Using memory spaces
- [Hive Mode Guide](../02-core-features/10-hive-mode) - Multi-tool memory sharing
- [Memory Spaces Guide](../02-core-features/01-memory-spaces) - Core concepts
- [A2A Communication](./a2a-communication) - Collaboration Mode

**Questions?** Ask in [Discussions](https://github.com/SaintNick1214/Project-Cortex/discussions).
